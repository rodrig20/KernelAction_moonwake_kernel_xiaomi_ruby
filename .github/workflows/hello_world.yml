name: "MoonWake at 27:00"

on:
  workflow_dispatch:

permissions:
  contents: write
  discussions: write

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout"
        uses: actions/checkout@v3

      - name: Telegram File Uploader
        uses: xz-dev/TelegramFileUploader@v1.1.1
        with:
          to-who: '${{ secrets.TELEGRAM_API_TO_WHO }}'
          message: |
            **MoonWake at 27:00**

            ðŸ“Š **Workflow Infomations:**
            - **Status:** ${{ github.action_status }}
            - **Attempt:** ${{ github.run_attempt }}
            - **Run Number:** #${{ github.run_number }}
            - **Run ID:** ${{ github.run_id }}
            - **Actor:** ${{ github.actor }}
            - **Original Actor:** ${{ github.github.triggering_actor }}
            - **Workflow SHA:** ${{ github.sha }}
            - **Workflow Link:** [click here](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})

            ðŸ“„ **Notes:**
            - You're RESPONSIBLE for EVERY DAMAGE, if you flash this ${{ github.event.inputs.config_type }} build.
            - [Step to flash MoonWake in AOSP](https://github.com/RainyXeon/moonwake_kernel_xiaomi_ruby/wiki/Flash-MoonWake-on-AOSP)
            - [Step to flash MoonWake in HyperOS/MIUI](https://github.com/RainyXeon/moonwake_kernel_xiaomi_ruby/wiki/Flash-MoonWake-on-MIUI-HyperOS)
          files: |
            LICENSE
            README.md
        env:
          API_ID: ${{ secrets.TELEGRAM_API_ID }}
          API_HASH: ${{ secrets.TELEGRAM_API_HASH }}
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}